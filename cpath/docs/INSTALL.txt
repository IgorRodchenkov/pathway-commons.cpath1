This document describes the procedure for installing cPath.

System Requirements:
--------------------
To install cPath, you must have the following installed locally:

1.  mySQL:  Information available at:  http://www.mysql.com/.
2.  Apache Tomcat Server, 4.1X or above:  
	Information available at:  http://jakarta.apache.org/tomcat/
	Note that cPath has not been tested on Apache Tomcat, 5.X or above.
3.  Apache Ant:  Information available at:  http://ant.apache.org/
4.  Perl 5.0 (or later):  Required for running the cPath Administrator Command Line Tools.

Step-by-Step Instructions:
--------------------------

1.  If you have not already done so, install mySQL, Apache Tomcat, and Ant locally.
Once you have verified that the installations are working correctly, proceed to step 2.

2.  Create a mysql user for cPath.  For easiest installation, use the following:

	user:  		tomcat@localhost
	password:	kitty

If you choose a different user/password combination, see Appendix A below.

Instructions on adding new mySQL users is available online at: 
http://www.mysql.com/doc/en/Adding_users.html

make sure this user has permission to update the database

Make sure this user has permission to update the database.

3.  Load the cPath Tables.  To do so:

cd [CPATH_ROOT]/dbData
mysql -u tomcat -p < cpath.sql

You will be prompted for a password.  Enter the value:  "kitty".

4.  Load a Demo Set of Sample data

cd [CPATH_ROOT]/dbData
mysql -u tomcat -p < demo.sql

You will again be prompted for a password.  Enter the value:  "kitty".

5.  Copy dist/cpath.war to [JAKARTA_TOMCAT_DIR]/webapps and restart Apache Tomcat.

Note:  On certain platforms, you may not even need to restart Tomcat.  For example,
if you are running Tomcat 5 on Windows, Tomcat will immediately detect the new
WAR file, and load it automatically.

6.  Open a web browser, and go to:  http://localhost:8080/cpath

Verify that you can see the cPath Home Page.

7.  As a final step, you must run the full text indexer.

a.  Go to:  http://localhost:8080/cpath/adminHome.do
b.  When prompted, enter the following:

user:  admin
password:  cpath

c.  Select the link:  "Run Full Text Indexer" -- full indexing of the demo set
takes approximately 30 seconds.

Appendix A:  Creating a CPath MySQL User
----------------------------------------

If you choose a mySQL user other than user=tomcat/password=kitty, you must
update two configuration files:

[CPATH_ROOT]/config/config-JDBC.properties;  and
[CPATH_ROOT]/web/WEB-INF/web.xml

Replace the words tomcat/kitty with your own username/password.

Appendix B:  Running Pre-Computed Queries
-----------------------------------------

Depending on your data set, some cPath queries may take several seconds to execute.
For example, if a user requests all interactions from the DIP database via the
Advanced Search page, this query may take several seconds (perhaps even 10-20 seconds)
to complete.  To address this situation, cPath includes a generalized framework for
pre-computing queries.  You simply create a text file with your designated queries,
add it to a cron job, and cPath will automatically pre-compute these queries on
a regular schedule.  If a user executes a query which matches one of the pre-computed
queries, the result is returned immediately, resulting in very fast performance.

Here is a sample configuration file with two pre-computed queries 
(see testData/precompute_junit.txt for the full text.)

-------------------------
# Relative URLs for Sample Pre-Computed Queries
# URLs Must be specified as name / value pairs separated by & character.

# Retrieve all Human Data
version=1.0&cmd=get_by_interactor_tax_id&q=9606&q=&maxHits=unbounded&format=psi

# Retrieve all DIP Data
version=1.0&cmd=get_by_interaction_db&q=DIP&maxHits=unbounded&format=psi
-------------------------

Each query is specified as a Web Service API call (see /cpath/webservice?cmd=help
for complete details on the Web Service API.) In the example above, we have specified
two queries:  the first retrieves all Human data; the second retrieves all DIP data.

To run the pre-computed queries:

1.  Set a CPATH_HOME environment variable to point to the root CPATH directory.  For example, on
Linux/Mac OS X:

export CPATH_HOME=/Users/cerami/dev/sander/cpath

2.  Run the perl script:  bin/admin.pl and specify the query file.

For example:

bin/admin.pl pre_compute testData/precompute_junit.txt

If you want to schedule pre-computed queries with a cron job, a sample cron file is 
provided in config/crontab.cron.  Make sure that your crontab file specifies a CPATH_HOME
environment variable (see crontab.cron for details.)

